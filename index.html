<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  

  
  <title>fengweizan&#39;s BLOG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="my blog with material design">
<meta property="og:type" content="website">
<meta property="og:title" content="fengweizan&#39;s BLOG">
<meta property="og:url" content="https://fclehly.github.io/index.html">
<meta property="og:site_name" content="fengweizan&#39;s BLOG">
<meta property="og:description" content="my blog with material design">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="FWZ">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="fengweizan&#39;s BLOG" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">fengweizan&#39;s BLOG</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://fclehly.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Unittest" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/06/27/Unittest/" class="article-date">
  <time datetime="2021-06-27T13:28:59.000Z" itemprop="datePublished">2021-06-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/06/27/Unittest/">Unittest</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="单元测试基本原则"><a href="#单元测试基本原则" class="headerlink" title="单元测试基本原则"></a>单元测试基本原则</h2><p>宏观上，单元测试要符合AIR原则；微观上，单元测试的代码层面要符合BCDE原则</p>
<h3 id="AIR-原则"><a href="#AIR-原则" class="headerlink" title="AIR 原则"></a>AIR 原则</h3><p>单元测试的价值在业务代码线上运行时，难以感觉到器测试用例的存在和价值，但在代码质量的保障上，却是非常关键的。新增代码应该同步增加测试用例，修改代码逻辑是也应该同步保证测试用例成功执行。 AIR原则具体包括：</p>
<ul>
<li>A: 自动化 Automatic</li>
<li>I: 独立性 Independent</li>
<li>R: 可重复 Repeatable</li>
</ul>
<p>单元测试应该是全自动执行的。测试用例通常会被频繁的触发执行，执行过程必须完全自动化才有意义。如果单元测试的输出结果需要人工介入检查，那么它一定是不合格的。单元测试中不允许使用控制台输出来进行人工验证，而必须使用断言来验证。</p>
<p>为了保证单元测试稳定可靠且便于维护，需要保证其独立性。用例之间不允许相互调用，也不允许出现执行次序的先后依赖。 如: testFunc2()需要调用testFunc1()，在执行testFunc2时会重复执行验证testFunc1，导致运行效率降低，且testFun1的验证失败会影响testFun2的执行。通常主流的测试框架中，测试用例的执行顺序都是无序的。</p>
<p>单元测试时可以重复执行的，不能收到外界环境的影响。比如单元测试通常会被放到持续集成中，每次有代码提交时单元测试都会被触发执行。如果单测对外部环境（网络、服务、中间件等）有依赖，则容易导致持续集成机制的不可用。</p>
<h3 id="BCDE-原则"><a href="#BCDE-原则" class="headerlink" title="BCDE 原则"></a>BCDE 原则</h3><p>编写单元测试时要保证测试粒度足够小，这样有助于精确定位问题，单元测试用例默认是方法级别的。单测不负责检查跨类或者跨系统的交互逻辑，那是集成测试需要覆盖的范围。编写单元测试用例时，为了保证北侧模块的交付质量，需要符合BCDE原则。</p>
<ul>
<li>B: Border，边界值测试，包括循环便捷、特殊取值、特殊时间点、数据顺序等。</li>
<li>C: Correct，正确的输入，并得到预期的结果。</li>
<li>D: Design，与设计文档相结合，来编写单元测试。</li>
<li>E: Error，单元测试的目的是证明程序有错，而不是程无错。为了发现代码中潜在的错误，我们需要在编写测试用例时有一些强制的错误输入（如非法数据、异常流程、非业务允许输入等）来得到预期的错误结果。</li>
</ul>
<p>由于单元测试只是系统集成测试前的小模块测试，有些因素往往是不具备的，因此需要进行Mock，例如：</p>
<ol>
<li>功能因素。如：被测试方法内部调用的功能不可用。</li>
<li>时间因素。如：关键日企还没到来，与此时间相关的功能点。</li>
<li>环境因素。如：政策环境，多端环境；</li>
<li>数据因素。如：线下数据样本过小，难以覆盖各种线上真是场景。</li>
<li>其他因素。为了简化测试编写，开发者也可以将一些负责的依赖采用Mock方式实现。</li>
</ol>
<p>最简单的Mock方式是硬编码，更为优雅的方式是使用配置文件，最佳的方式是使用相应的Mock框架。Mock的本质是让我们写出更稳定的单元测试，隔离上述因素对单元测试的影响，使结果变得可预测，做到真正的单元测试。</p>
<h2 id="单元测试覆盖率"><a href="#单元测试覆盖率" class="headerlink" title="单元测试覆盖率"></a>单元测试覆盖率</h2><p>单元测试是一种白盒测试，测试者依据程序的内部结果来实现测试代码。单测的覆盖率是指业务代码被单测测试的比例和程度，它是衡量单元测试好坏的一个很重要的指标，各种覆盖率从粗到细、从弱到强排列如下：</p>
<p>粗粒度的覆盖</p>
<ul>
<li>类覆盖</li>
<li>方法覆盖</li>
</ul>
<p>细粒度的覆盖</p>
<ul>
<li>行覆盖</li>
<li>分支覆盖</li>
<li>条件判定覆盖</li>
<li>条件组合覆盖</li>
<li>路径覆盖</li>
</ul>
<h2 id="golang"><a href="#golang" class="headerlink" title="golang"></a>golang</h2><h3 id="testing"><a href="#testing" class="headerlink" title="testing"></a>testing</h3><pre><code class="go">func TestAdd(t *testing.T) &#123;
    got := Add(10)
    if got == 11 &#123;
        t.Errorf(&quot;wrong result of Add(10)&quot;)
    &#125;
&#125;
</code></pre>
<ul>
<li><p>每个test文件必须import一个testing</p>
</li>
<li><p>test文件文件下的每一个testcase 均必须以Test开头并且符合TestXxxx形式，否则go test会直接跳过测试不执行；</p>
</li>
<li><p>testcase 的入参为<code>t *testing.T</code>或<code>b *testing.B</code></p>
</li>
<li><p><code>t.SkipNow()</code>为跳过当前test，并且直接按pass处理继续下一个test</p>
<p>如果遇到testcase不想跑，或者testcase暂时有问题但是短时间内fix不了而以后肯定是会用的，此时会用<code>t.SkipNow()</code>跳过当前testcase并继续下一个testcase。</p>
<p><code>t.skipNow()</code>一定要写在testcase的第一行。写在中间或者末尾则不起作用</p>
</li>
<li><p>go的test不会保证多个testcase是顺序执行的，但通常会按顺序执行。</p>
<p>当遇到多个testcase可能会互相依赖，比如testcase1的结果作为testcase2的输入，或者多个testcase必须得按顺序执行同时结果也得按顺序输出，此时testcase是有顺序的，可以使用subtests的方式解决。</p>
<p>使用<code>t.Run</code>来执行subtests可以控制testcases的输出以及执行顺序；</p>
<pre><code class="go">func TestPrint(t *testing.T) &#123;
    t.Run(&quot;a1&quot;, func(t *testing.T) &#123; fmt.Println(&quot;a1&quot;))t.Run(&quot;a2&quot;, func(t *testing.T) &#123; fmt.Println(&quot;a2&quot;))
    t.Run(&quot;a3&quot;, func(t *testing.T) &#123; fmt.Println(&quot;a3&quot;))
&#125;
</code></pre>
</li>
<li><p>使用TestMain作为初始化test，并且使用<code>m.Run()</code>来调用其他tests可以完成一些需要初始化操作的testing，比如数据库连接、文件打开、服务登录等。</p>
<pre><code class="go">func TestMain(m *testing.M) &#123;
    fmt.Println(&quot;run test main first&quot;)
    m.Run()
&#125;
</code></pre>
<p>如果没有在TestMain中调用<code>m.Run()</code>，则除了TestMain以外的其他tests都不会执行</p>
</li>
</ul>
<h3 id="BenchMark"><a href="#BenchMark" class="headerlink" title="BenchMark"></a>BenchMark</h3><ul>
<li>benchmark函数一般以<code>Benchmark</code>为前缀</li>
<li>benchmark函数一般会会跑b.N次，而且每次执行都会如此</li>
<li>在执行过程中会根据实际case的执行时间是否稳定来增加b.N的次数已达到稳态</li>
</ul>
<pre><code>$ go test -bench=.
</code></pre>
<pre><code class="go">func BenchmarkAll(b *testing.B) &#123;
    for n := 0; n &lt; b.N; n++ &#123;
        Add(n)
    &#125;
&#125;
</code></pre>
<pre><code class="go">func unstable(n int) int &#123;
    if n &gt; 0 &#123;
        n--
    &#125;
    return n
&#125;
func BenchMarUnstable(b *testing.B) &#123;
    for n := 0; n &lt; b.N; n++ &#123;
        unstable(n)
    &#125;
&#125;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fclehly.github.io/2021/06/27/Unittest/" data-id="ckqfcw1wq0000nv0tfq2jbp0w" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Media-Basic" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/05/05/Media-Basic/" class="article-date">
  <time datetime="2021-05-05T07:49:50.000Z" itemprop="datePublished">2021-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/media/">media</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/05/05/Media-Basic/">Media-Basic</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h1 id="音视频基础知识"><a href="#音视频基础知识" class="headerlink" title="音视频基础知识"></a>音视频基础知识</h1><h2 id="视频基础"><a href="#视频基础" class="headerlink" title="视频基础"></a>视频基础</h2><h3 id="RGB"><a href="#RGB" class="headerlink" title="RGB"></a>RGB</h3><p>数字图像使用RGB表示</p>
<ul>
<li>R: 红光</li>
<li>G: 绿光</li>
<li>B: 蓝光</li>
</ul>
<p>每个RGB分量可以用8bit表示；(256个色度)，例如：</p>
<ul>
<li><p><code>#FF0000</code> = 红色</p>
</li>
<li><p><code>#FFFFFF</code> = 白色</p>
</li>
</ul>
<p>也有使用10bit表示的</p>
<ul>
<li>RGBA_8888: RGBA分量各占8bit（A表示alpha不透明度参数）</li>
<li>RGB_565: R分量5bit，G分量6bit，B分量5bit</li>
<li>RGB_888：RGB分量各8bit</li>
</ul>
<p>720的RGB_888图像的大小：</p>
<pre><code>1280 * 720 * 3 = 2.637MB
</code></pre>
<p>如果是90分钟电影，每秒25帧，则大小：</p>
<pre><code>2.637MB * 90 * 15 = 347.651MB
</code></pre>
<p>因此需要压缩；</p>
<ul>
<li>图像压缩：jpeg, png…</li>
<li>视频压缩: h264, h265…</li>
</ul>
<h3 id="YUV"><a href="#YUV" class="headerlink" title="YUV"></a>YUV</h3><p>YUV主要应用于优化彩色视频信号的传输，使其向后兼容老式黑白电视。</p>
<p>“Y”表示明亮度（Luminance或Luma），也称灰阶值；而“U”和“V”表示的则是色度（Chrominance或Chroma），它们的作用是描述影像的色彩及饱和度，用于指定像素的颜色。</p>
<p>YUV格式有两大类: planar和packed</p>
<ul>
<li>planar: 先连续存储所有像素点的Y，接着存储所有像素点的U，随后是所有像素点的V；<pre><code>YYYYYYYYYYYY
YYYYYYYYYYYY
UUUUUUUUUUUU
UUUUUUUUUUUU
VVVVVVVVVVVV
VVVVVVVVVVVV
</code></pre>
<pre><code>YUVYUVYUVYUV
YUVYUVYUVYUV
YUVYUVYUVYUV
YUVYUVYUVYUV
</code></pre>
</li>
<li>packed：每个像素点的Y、U、V是连续交替存储的；<pre><code>YUVYUVYUVYUV
YUVYUVYUVYUV
YUVYUVYUVYUV
YUVYUVYUVYUV
</code></pre>
YUV存在多种格式，不同的YUV格式的数据在存储时的排列顺序不一样。开发时不注意会导致画面不正常，如：花屏、绿屏等</li>
<li>YUV 4:4:4  每一个Y分量对应一组UV分量</li>
<li>YUV 4:2:2  每两个Y分量共用一组UV分量</li>
<li>YUV 4:2:0  每四个Y分量共用一组UV分量</li>
</ul>
<p>YUV420p</p>
<pre><code>YYYYYYYY
YYYYYYYY
YYYYYYYY
YYYYYYYY
UUUUUUUU
VVVVVVVV
</code></pre>
<p>YUV420sp</p>
<pre><code>YYYYYYYY
YYYYYYYY
YYYYYYYY
YYYYYYYY
UVUVUVUV
UVUVUVUV
</code></pre>
<p>相较于RGB，我们可以计算一帧为1280×720的视频帧，用YUV420P的格式来表示，其数据量的大小如下</p>
<pre><code>1280*720*1+1280*720*0.5 = 1.318MB
</code></pre>
<p>如果fps（1秒的视频帧数目）是25，按照一般电影的长度90分钟来计算，那么这部电影用YUV420P的数据格式来表示的话，其数据量的大小就是：</p>
<pre><code>1.318MB*25fps*90min*60s = 173.76GB
</code></pre>
<p>libyuv: google开源的实现各种YUV和RGB之间相互转换、旋转、缩放、裁剪的库。</p>
<h3 id="主要概念"><a href="#主要概念" class="headerlink" title="主要概念"></a>主要概念</h3><ul>
<li>视频码率：kb/s, 视频文件在单位时间内使用的数据流量，也叫码流率。码率越大，说明单位时间内采样率越大，数据流精度就越高；</li>
<li>视频帧率：fps，单位时间内的视频帧数，准率越高，给人的视觉越流畅。</li>
</ul>
<h3 id="帧"><a href="#帧" class="headerlink" title="帧"></a>帧</h3><h4 id="I帧"><a href="#I帧" class="headerlink" title="I帧"></a>I帧</h4><p>Infra coded frames</p>
<p>I帧通常是每个GOP（MPEG所使用的一种视频压缩技术）的第一个帧，经过适度地压缩，作为随机访问的参考点，可以当成静态图像。I帧可以看作一个图像经过压缩后的产物，I帧压缩可以得到6：1的压缩比而不会产生任何可觉察的模糊现象。</p>
<p>I帧自身可以通过视频解压算法解压成一张单独的完整视频画面，所以I帧去掉的是视频帧在空间维度上的冗余信息。</p>
<h4 id="P帧"><a href="#P帧" class="headerlink" title="P帧"></a>P帧</h4><p>前向预测编码帧（predictiveframe），通过将图像序列中前面已编码帧的时间冗余信息充分去除来压缩传输数据量的编码图像，也称为预测帧。</p>
<p>P帧需要参考其前面的一个I帧或者P帧来解码成一张完整的视频画面。</p>
<h4 id="B帧"><a href="#B帧" class="headerlink" title="B帧"></a>B帧</h4><p>双向预测内插编码帧（bidirectionalinterpolatedpredictionframe），既考虑源图像序列前面的已编码帧，又顾及源图像序列后面的已编码帧之间的时间冗余信息，来压缩传输数据量的编码图像，也称为双向预测帧。</p>
<p>B帧则需要参考其前一个I帧或者P帧及其后面的一个P帧来生成一张完整的视频画面，所以P帧与B帧去掉的是视频帧在时间维度上的冗余信息。</p>
<h4 id="GOP"><a href="#GOP" class="headerlink" title="GOP"></a>GOP</h4><p>两个I帧之间形成的一组图片，就是GOP（Group Of Picture）的概念。</p>
<pre><code>|I|P|B|B|P|B|B|I|B|B|B|......
|&lt;--  GOP  --&gt;|
</code></pre>
<h2 id="常用视频压缩算法"><a href="#常用视频压缩算法" class="headerlink" title="常用视频压缩算法"></a>常用视频压缩算法</h2><ul>
<li>MPEG2 (MPEG)</li>
<li>H264  (MPEG)</li>
<li>H265  (MPEG)</li>
<li>AVS   （中国）</li>
<li>VP8   (Google)</li>
<li>VP9   (Google)</li>
</ul>
<h3 id="H264"><a href="#H264" class="headerlink" title="H264"></a>H264</h3><p>视频编码分析工具：Elecard streameye tools</p>
<h4 id="NALU"><a href="#NALU" class="headerlink" title="NALU"></a>NALU</h4><p>TODO</p>
<h4 id="帧内预测"><a href="#帧内预测" class="headerlink" title="帧内预测"></a>帧内预测</h4><p>TODO</p>
<h4 id="帧间预测"><a href="#帧间预测" class="headerlink" title="帧间预测"></a>帧间预测</h4><p>TODO</p>
<h3 id="HEVC"><a href="#HEVC" class="headerlink" title="HEVC"></a>HEVC</h3><p>TODO</p>
<h2 id="音频基础"><a href="#音频基础" class="headerlink" title="音频基础"></a>音频基础</h2><h3 id="物理特性"><a href="#物理特性" class="headerlink" title="物理特性"></a>物理特性</h3><p>声音是由物体振动而产生的</p>
<ul>
<li><p>频率：频率（过零率）越高，波长就越短。低频声响的波长则较长，所以其可以更容易地绕过障碍物，因此能量衰减就小，声音就会传得远，反之则会得到完全相反的结论。</p>
</li>
<li><p>响度：响度其实就是能量大小的反映，用不同的力度敲击桌子，声音的大小势必也会不同。在生活中，分贝常用于描述响度的大小。声音超过一定的分贝，人类的耳朵就会受不了。</p>
</li>
<li><p>音色：音色其实也不难理解，在同样的音调（频率）和响度（振幅）下，钢琴和小提琴的声音听起来是完全不相同的，因为它们的音色不同。波的形状决定了其所代表声音的音色，钢琴和小提琴的音色不同就是因为它们的介质所产生的波形不同。</p>
</li>
</ul>
<h3 id="音频主要概念"><a href="#音频主要概念" class="headerlink" title="音频主要概念"></a>音频主要概念</h3><ul>
<li>比特率： 每秒传输的bit数，单位为bps，是简介衡量声音质量的一个标准。没有压缩的音频数据采样率=采样频率<em>采样精度</em>通道数</li>
<li>码率：压缩后的音频数据比特率。常见的码率：<ul>
<li>96kbps：FM质量</li>
<li>28-160kbps：一般质量音频</li>
<li>192kbps： CD质量</li>
<li>256-320kbps：高质量音频<br>码率越大，压缩效率越低，音质越好，压缩后数据越大；<br>码率=音频文件大小/时长</li>
</ul>
</li>
</ul>
<h3 id="音频帧"><a href="#音频帧" class="headerlink" title="音频帧"></a>音频帧</h3><p>音频的帧的概念没有视频帧那么清晰。</p>
<p>音频压缩单位：一帧多少个采样点</p>
<ul>
<li>aac: 通常1024，有时2048（16khz）</li>
<li>mp3: 通常1152</li>
</ul>
<p>帧长：</p>
<ul>
<li>可以指每帧采样数播放的时间，如：mp3 48k, 1152个采样点，每帧则为24ms；aac则是每帧1024个采样点。攒够一帧的数据才送去编码。</li>
<li>也可以指压缩后每帧的数据长度。<br>所以讲到帧的时候要注意其适用的场合。</li>
</ul>
<p>每帧的持续时间=每帧的采样点数/采样频率(HZ)</p>
<p>交错模式：数据音频信号的存储方式。数据以连续帧的方式存放，即首先记录帧1的左声道样本和右声道样本，再开始帧2的记录…</p>
<pre><code>1024个采样点一帧为例
|0 |1 |2 |3 |...|1023
|LR|LR|LR|LR|...|LR|......
</code></pre>
<p>非交错模式:首先记录的是一个周期内所有帧的左声道样本，再记录所有右声道样本。</p>
<pre><code>1024个采样点一帧为例
0......1023
LLLLLL...L
RRRRR....R
LLLLLL...L
RRRRR....R
</code></pre>
<h3 id="PCM"><a href="#PCM" class="headerlink" title="PCM"></a>PCM</h3><p>TODO</p>
<h3 id="AAC"><a href="#AAC" class="headerlink" title="AAC"></a>AAC</h3><p>TODO</p>
<h3 id="OGG"><a href="#OGG" class="headerlink" title="OGG"></a>OGG</h3><p>TODO</p>
<h2 id="封装格式基础"><a href="#封装格式基础" class="headerlink" title="封装格式基础"></a>封装格式基础</h2><p>封装格式(也叫容器)就是将已经编码压缩好的视频流、音频流、字幕按照一定方案放到一个文件中，便于播放软件播放。一般来说，视频文件的后缀名，就是它的封装格式。</p>
<p>封装格式不一样，后缀名也就不一样。</p>
<h3 id="FLV"><a href="#FLV" class="headerlink" title="FLV"></a>FLV</h3><p>流式</p>
<pre><code>------
Header
------
Audio
------
Video
------
Audio
------
Video
------
......
</code></pre>
<p>适合直播</p>
<p>TODO</p>
<h3 id="MP4"><a href="#MP4" class="headerlink" title="MP4"></a>MP4</h3><p>索引</p>
<pre><code>-----------
Header
-----------
audio index
-----------
video index
-----------
audio index
-----------
video index
-----------
......
-----------
audio
-----------
video
-----------
audio
-----------
video
-----------
</code></pre>
<p>适合本地播放</p>
<h2 id="传输协议基础"><a href="#传输协议基础" class="headerlink" title="传输协议基础"></a>传输协议基础</h2><h3 id="RTMP"><a href="#RTMP" class="headerlink" title="RTMP"></a>RTMP</h3><p>TODO</p>
<h3 id="HLS"><a href="#HLS" class="headerlink" title="HLS"></a>HLS</h3><p>苹果推出的视频传输协议</p>
<p><a href="https://developer.apple.com/streaming/">https://developer.apple.com/streaming/</a></p>
<p><a href="https://tools.ietf.org/html/rfc8216">HTTP Live Streaming</a></p>
<p>TODO</p>
<h4 id="m3u8"><a href="#m3u8" class="headerlink" title="m3u8"></a>m3u8</h4><p>按一定格式编写的文本文件，m3u8 = m3u + utf8<br>TODO</p>
<h3 id="RTSP"><a href="#RTSP" class="headerlink" title="RTSP"></a>RTSP</h3><p><a href="https://tools.ietf.org/html/rfc2326">RFC 2326 - Real Time Streaming Protocol</a></p>
<p>类http文本</p>
<h4 id="方法定义"><a href="#方法定义" class="headerlink" title="方法定义"></a>方法定义</h4><h5 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h5><h5 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h5><h5 id="Announce"><a href="#Announce" class="headerlink" title="Announce"></a>Announce</h5><h5 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h5><h5 id="Play"><a href="#Play" class="headerlink" title="Play"></a>Play</h5><h5 id="Pause"><a href="#Pause" class="headerlink" title="Pause"></a>Pause</h5><h5 id="Teardown"><a href="#Teardown" class="headerlink" title="Teardown"></a>Teardown</h5><p>TODO</p>
<h4 id="RTCP"><a href="#RTCP" class="headerlink" title="RTCP"></a>RTCP</h4><p><a href="https://tools.ietf.org/html/rfc3605">Real Time Control Protocol (RTCP) attribute in Session Description Protocol (SDP)</a><br>TODO</p>
<h4 id="RTP"><a href="#RTP" class="headerlink" title="RTP"></a>RTP</h4><p><a href="https://tools.ietf.org/html/rfc3550">RFC 3550 - RTP: A Transport Protocol for Real-Time Application</a></p>
<p>TODO</p>
<h3 id="SDP"><a href="#SDP" class="headerlink" title="SDP"></a>SDP</h3><p>会话描述协议<br>TODO</p>
<h2 id="WebRTC"><a href="#WebRTC" class="headerlink" title="WebRTC"></a>WebRTC</h2><p>TODO</p>
<h3 id="音视频同步基础"><a href="#音视频同步基础" class="headerlink" title="音视频同步基础"></a>音视频同步基础</h3><h4 id="DTS"><a href="#DTS" class="headerlink" title="DTS"></a>DTS</h4><p>Decoding Time Stamp</p>
<h4 id="PTS"><a href="#PTS" class="headerlink" title="PTS"></a>PTS</h4><p>Presentation Time Stamp</p>
<h4 id="音视频同步方式"><a href="#音视频同步方式" class="headerlink" title="音视频同步方式"></a>音视频同步方式</h4><ul>
<li>Audio Master: 同步视频到音频</li>
<li>Video Master: 同步音频到视频</li>
<li>External Clock Master: 同步音频和视频到外部时钟</li>
</ul>
<p>一般情况下：<br>Audio Master &gt; Video Master &gt; External Clock Master</p>
<h3 id="直播简要流程"><a href="#直播简要流程" class="headerlink" title="直播简要流程"></a>直播简要流程</h3><pre><code class="mermaid">graph LR
A[摄像头采集]--&gt;B[YUV420P]
B --&gt; C[H264压缩]
C --&gt; D[RTMP传输]
D --&gt; E[H264解码]
E --&gt; F[YUV420p]
F --&gt; G[RGB显示]
</code></pre>
<h2 id="开源项目"><a href="#开源项目" class="headerlink" title="开源项目"></a>开源项目</h2><h3 id="ffmpeg"><a href="#ffmpeg" class="headerlink" title="ffmpeg"></a>ffmpeg</h3><p><a href="http://ffmpeg.org/">http://ffmpeg.org</a></p>
<p>TODO</p>
<h4 id="avpacket"><a href="#avpacket" class="headerlink" title="avpacket"></a>avpacket</h4><h4 id="mpegts"><a href="#mpegts" class="headerlink" title="mpegts"></a>mpegts</h4><h4 id="avfilter"><a href="#avfilter" class="headerlink" title="avfilter"></a>avfilter</h4><p>……<br>TODO</p>
<h3 id="librtmp"><a href="#librtmp" class="headerlink" title="librtmp"></a>librtmp</h3><p>TODO</p>
<h3 id="srs"><a href="#srs" class="headerlink" title="srs"></a>srs</h3><p>simple rtmp server</p>
<p><a href="https://github.com/ossrs/srs">https://github.com/ossrs/srs</a></p>
<p>TODO</p>
<h3 id="nginx-rtmp-module"><a href="#nginx-rtmp-module" class="headerlink" title="nginx-rtmp-module"></a>nginx-rtmp-module</h3><p><a href="https://github.com/arut/nginx-rtmp-module">https://github.com/arut/nginx-rtmp-module</a></p>
<p>TODO</p>
<h3 id="janus"><a href="#janus" class="headerlink" title="janus"></a>janus</h3><p><a href="https://github.com/meetecho/janus-gateway">https://github.com/meetecho/janus-gateway</a></p>
<p>TODO</p>
<h3 id="live555"><a href="#live555" class="headerlink" title="live555"></a>live555</h3><p><a href="http://www.live555.com/">http://www.live555.com</a></p>
<p>TODO</p>
<h3 id="ijkplayer"><a href="#ijkplayer" class="headerlink" title="ijkplayer"></a>ijkplayer</h3><p><a href="https://github.com/Bilibili/ijkplayer">https://github.com/Bilibili/ijkplayer</a></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><h3 id="书籍"><a href="#书籍" class="headerlink" title="书籍"></a>书籍</h3><ol>
<li>WebRTC权威指南</li>
<li>音视频开发进阶指南:基于Android和iOS平台的实践</li>
<li>FFmpeg从入门到精通</li>
<li>新一代视频压缩编码标准:H.264/AVC</li>
</ol>
<h3 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h3><ol>
<li><a href="https://blog.csdn.net/leixiaohua1020">https://blog.csdn.net/leixiaohua1020</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fclehly.github.io/2021/05/05/Media-Basic/" data-id="ckogykb17000cw50td1or7edr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/audio/" rel="tag">audio</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/media/" rel="tag">media</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/video/" rel="tag">video</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-go-slice" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/28/go-slice/" class="article-date">
  <time datetime="2020-06-28T12:34:56.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/28/go-slice/">go slice</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Go-切片：用法和本质"><a href="#Go-切片：用法和本质" class="headerlink" title="Go 切片：用法和本质"></a><a href="https://blog.go-zh.org/go-slices-usage-and-internals">Go 切片：用法和本质</a></h3><p>2011/01/05</p>
<h4 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h4><p>Go的切片类型为处理同类型数据序列提供一个方便而高效的方式。 切片有些类似于其他语言中的数组，但是有一些不同寻常的特性。 本文将深入切片的本质，并讲解它的用法。</p>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>Go的切片是在数组之上的抽象数据类型，因此在了解切片之前必须要先理解数组。</p>
<p>数组类型定义了长度和元素类型。例如， <code>[4]int</code> 类型表示一个四个整数的数组。 数组的长度是固定的，长度是数组类型的一部分（ <code>[4]int</code> 和 <code>[5]int</code> 是完全不同的类型）。 数组可以以常规的索引方式访问，表达式 <code>s[n]</code> 访问数组的第 n 个元素。</p>
<pre><code>var a [4]int
a[0] = 1
i := a[0]
// i == 1
</code></pre>
<p>数组不需要显式的初始化；数组的零值是可以直接使用的，数组元素会自动初始化为其对应类型的零值：</p>
<pre><code>// a[2] == 0, int 类型的零值
</code></pre>
<p>类型 <code>[4]int</code> 对应内存中四个连续的整数：</p>
<p><img src="https://blog.go-zh.org/go-slices-usage-and-internals_slice-array.png" alt="img"></p>
<p>Go的数组是值语义。一个数组变量表示整个数组，它不是指向第一个元素的指针（不像 C 语言的数组）。 当一个数组变量被赋值或者被传递的时候，实际上会复制整个数组。 （为了避免复制数组，你可以传递一个指向数组的指针，但是数组指针并不是数组。） 可以将数组看作一个特殊的struct，结构的字段名对应数组的索引，同时成员的数目固定。</p>
<p>数组的字面值像这样：</p>
<pre><code>b := [2]string&#123;&quot;Penn&quot;, &quot;Teller&quot;&#125;
</code></pre>
<p>当然，也可以让编译器统计数组字面值中元素的数目：</p>
<pre><code>b := [...]string&#123;&quot;Penn&quot;, &quot;Teller&quot;&#125;
</code></pre>
<p>这两种写法， <code>b</code> 都是对应 <code>[2]string</code> 类型。</p>
<h4 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h4><p>数组虽然有适用它们的地方，但是数组不够灵活，因此在Go代码中数组使用的并不多。 但是，切片则使用得相当广泛。切片基于数组构建，但是提供更强的功能和便利。</p>
<p>切片类型的写法是 <code>[]T</code> ， <code>T</code> 是切片元素的类型。和数组不同的是，切片类型并没有给定固定的长度。</p>
<p>切片的字面值和数组字面值很像，不过切片没有指定元素个数：</p>
<pre><code>letters := []string&#123;&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;&#125;
</code></pre>
<p>切片可以使用内置函数 <code>make</code> 创建，函数签名为：</p>
<pre><code>func make([]T, len, cap) []T
</code></pre>
<p>其中T代表被创建的切片元素的类型。函数 <code>make</code> 接受一个类型、一个长度和一个可选的容量参数。 调用 <code>make</code> 时，内部会分配一个数组，然后返回数组对应的切片。</p>
<pre><code>var s []byte
s = make([]byte, 5, 5)
// s == []byte&#123;0, 0, 0, 0, 0&#125;
</code></pre>
<p>当容量参数被忽略时，它默认为指定的长度。下面是简洁的写法：</p>
<pre><code>s := make([]byte, 5)
</code></pre>
<p>可以使用内置函数 <code>len</code> 和 <code>cap</code> 获取切片的长度和容量信息。</p>
<pre><code>len(s) == 5
cap(s) == 5
</code></pre>
<p>接下来的两个小节将讨论长度和容量之间的关系。</p>
<p>切片的零值为 <code>nil</code> 。对于切片的零值， <code>len</code> 和 <code>cap</code> 都将返回0。</p>
<p>切片也可以基于现有的切片或数组生成。切分的范围由两个由冒号分割的索引对应的半开区间指定。 例如，表达式 <code>b[1:4]</code>创建的切片引用数组 <code>b</code> 的第1到3个元素空间（对应切片的索引为0到2）。</p>
<pre><code>b := []byte&#123;&#39;g&#39;, &#39;o&#39;, &#39;l&#39;, &#39;a&#39;, &#39;n&#39;, &#39;g&#39;&#125;
// b[1:4] == []byte&#123;&#39;o&#39;, &#39;l&#39;, &#39;a&#39;&#125;, sharing the same storage as b
</code></pre>
<p>切片的开始和结束的索引都是可选的；它们分别默认为零和数组的长度。</p>
<pre><code>// b[:2] == []byte&#123;&#39;g&#39;, &#39;o&#39;&#125;
// b[2:] == []byte&#123;&#39;l&#39;, &#39;a&#39;, &#39;n&#39;, &#39;g&#39;&#125;
// b[:] == b
</code></pre>
<p>下面语法也是基于数组创建一个切片：</p>
<pre><code>x := [3]string&#123;&quot;Лайка&quot;, &quot;Белка&quot;, &quot;Стрелка&quot;&#125;
s := x[:] // a slice referencing the storage of x
</code></pre>
<h4 id="切片的内幕"><a href="#切片的内幕" class="headerlink" title="切片的内幕"></a>切片的内幕</h4><p>一个切片是一个数组片段的描述。它包含了指向数组的指针，片段的长度， 和容量（片段的最大长度）。</p>
<p><img src="https://blog.go-zh.org/go-slices-usage-and-internals_slice-struct.png" alt="img"></p>
<p>前面使用 <code>make([]byte, 5)</code> 创建的切片变量 <code>s</code> 的结构如下：</p>
<p><img src="https://blog.go-zh.org/go-slices-usage-and-internals_slice-1.png" alt="img"></p>
<p>长度是切片引用的元素数目。容量是底层数组的元素数目（从切片指针开始）。 关于长度和容量和区域将在下一个例子说明。</p>
<p>我们继续对 <code>s</code> 进行切片，观察切片的数据结构和它引用的底层数组：</p>
<pre><code>s = s[2:4]
</code></pre>
<p><img src="https://blog.go-zh.org/go-slices-usage-and-internals_slice-2.png" alt="img"></p>
<p>切片操作并不复制切片指向的元素。它创建一个新的切片并复用原来切片的底层数组。 这使得切片操作和数组索引一样高效。因此，通过一个新切片修改元素会影响到原始切片的对应元素。</p>
<pre><code>d := []byte&#123;&#39;r&#39;, &#39;o&#39;, &#39;a&#39;, &#39;d&#39;&#125;
e := d[2:]
// e == []byte&#123;&#39;a&#39;, &#39;d&#39;&#125;
e[1] = &#39;m&#39;
// e == []byte&#123;&#39;a&#39;, &#39;m&#39;&#125;
// d == []byte&#123;&#39;r&#39;, &#39;o&#39;, &#39;a&#39;, &#39;m&#39;&#125;
</code></pre>
<p>前面创建的切片 <code>s</code> 长度小于它的容量。我们可以增长切片的长度为它的容量：</p>
<pre><code>s = s[:cap(s)]
</code></pre>
<p><img src="https://blog.go-zh.org/go-slices-usage-and-internals_slice-3.png" alt="img"></p>
<p>切片增长不能超出其容量。增长超出切片容量将会导致运行时异常，就像切片或数组的索引超 出范围引起异常一样。同样，不能使用小于零的索引去访问切片之前的元素。</p>
<h4 id="切片的生长（copy-and-append-函数）"><a href="#切片的生长（copy-and-append-函数）" class="headerlink" title="切片的生长（copy and append 函数）"></a>切片的生长（copy and append 函数）</h4><p>要增加切片的容量必须创建一个新的、更大容量的切片，然后将原有切片的内容复制到新的切片。 整个技术是一些支持动态数组语言的常见实现。下面的例子将切片 <code>s</code> 容量翻倍，先创建一个2倍 容量的新切片 <code>t</code> ，复制 <code>s</code> 的元素到 <code>t</code> ，然后将 <code>t</code>赋值给 <code>s</code> ：</p>
<pre><code>t := make([]byte, len(s), (cap(s)+1)*2) // +1 in case cap(s) == 0
for i := range s &#123;
        t[i] = s[i]
&#125;
s = t
</code></pre>
<p>循环中复制的操作可以由 copy 内置函数替代。copy 函数将源切片的元素复制到目的切片。 它返回复制元素的数目。</p>
<pre><code>func copy(dst, src []T) int
</code></pre>
<p><code>copy</code> 函数支持不同长度的切片之间的复制（它只复制较短切片的长度个元素）。 此外， <code>copy</code> 函数可以正确处理源和目的切片有重叠的情况。</p>
<p>使用 <code>copy</code> 函数，我们可以简化上面的代码片段：</p>
<pre><code>t := make([]byte, len(s), (cap(s)+1)*2)
copy(t, s)
s = t
</code></pre>
<p>一个常见的操作是将数据追加到切片的尾部。下面的函数将元素追加到切片尾部， 必要的话会增加切片的容量，最后返回更新的切片：</p>
<pre><code>func AppendByte(slice []byte, data ...byte) []byte &#123;
    m := len(slice)
    n := m + len(data)
    if n &gt; cap(slice) &#123; // if necessary, reallocate
        // allocate double what&#39;s needed, for future growth.
        newSlice := make([]byte, (n+1)*2)
        copy(newSlice, slice)
        slice = newSlice
    &#125;
    slice = slice[0:n]
    copy(slice[m:n], data)
    return slice
&#125;
</code></pre>
<p>下面是 <code>AppendByte</code> 的一种用法：</p>
<pre><code>p := []byte&#123;2, 3, 5&#125;
p = AppendByte(p, 7, 11, 13)
// p == []byte&#123;2, 3, 5, 7, 11, 13&#125;
</code></pre>
<p>类似 <code>AppendByte</code> 的函数比较实用，因为它提供了切片容量增长的完全控制。 根据程序的特点，可能希望分配较小的活较大的块，或则是超过某个大小再分配。</p>
<p>但大多数程序不需要完全的控制，因此Go提供了一个内置函数 <code>append</code> ， 用于大多数场合；它的函数签名：</p>
<pre><code>func append(s []T, x ...T) []T
</code></pre>
<p><code>append</code> 函数将 <code>x</code> 追加到切片 <code>s</code> 的末尾，并且在必要的时候增加容量。</p>
<pre><code>a := make([]int, 1)
// a == []int&#123;0&#125;
a = append(a, 1, 2, 3)
// a == []int&#123;0, 1, 2, 3&#125;
</code></pre>
<p>如果是要将一个切片追加到另一个切片尾部，需要使用 <code>...</code> 语法将第2个参数展开为参数列表。</p>
<pre><code>a := []string&#123;&quot;John&quot;, &quot;Paul&quot;&#125;
b := []string&#123;&quot;George&quot;, &quot;Ringo&quot;, &quot;Pete&quot;&#125;
a = append(a, b...) // equivalent to &quot;append(a, b[0], b[1], b[2])&quot;
// a == []string&#123;&quot;John&quot;, &quot;Paul&quot;, &quot;George&quot;, &quot;Ringo&quot;, &quot;Pete&quot;&#125;
</code></pre>
<p>由于切片的零值 <code>nil</code> 用起来就像一个长度为零的切片，我们可以声明一个切片变量然后在循环 中向它追加数据：</p>
<pre><code>// Filter returns a new slice holding only
// the elements of s that satisfy fn()
func Filter(s []int, fn func(int) bool) []int &#123;
    var p []int // == nil
    for _, v := range s &#123;
        if fn(v) &#123;
            p = append(p, v)
        &#125;
    &#125;
    return p
&#125;
</code></pre>
<h4 id="可能的“陷阱”"><a href="#可能的“陷阱”" class="headerlink" title="可能的“陷阱”"></a>可能的“陷阱”</h4><p>正如前面所说，切片操作并不会复制底层的数组。整个数组将被保存在内存中，直到它不再被引用。 有时候可能会因为一个小的内存引用导致保存所有的数据。</p>
<p>例如， <code>FindDigits</code> 函数加载整个文件到内存，然后搜索第一个连续的数字，最后结果以切片方式返回。</p>
<pre><code>var digitRegexp = regexp.MustCompile(&quot;[0-9]+&quot;)

func FindDigits(filename string) []byte &#123;
    b, _ := ioutil.ReadFile(filename)
    return digitRegexp.Find(b)
&#125;
</code></pre>
<p>这段代码的行为和描述类似，返回的 <code>[]byte</code> 指向保存整个文件的数组。因为切片引用了原始的数组， 导致 GC 不能释放数组的空间；只用到少数几个字节却导致整个文件的内容都一直保存在内存里。</p>
<p>要修复整个问题，可以将感兴趣的数据复制到一个新的切片中：</p>
<pre><code>func CopyDigits(filename string) []byte &#123;
    b, _ := ioutil.ReadFile(filename)
    b = digitRegexp.Find(b)
    c := make([]byte, len(b))
    copy(c, b)
    return c
&#125;
</code></pre>
<p>可以使用 <code>append</code> 实现一个更简洁的版本。这留给读者作为练习。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fclehly.github.io/2020/06/28/go-slice/" data-id="ckogykb1l0017w50t9mqv040e" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-homebrew" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/07/homebrew/" class="article-date">
  <time datetime="2019-10-07T03:45:36.000Z" itemprop="datePublished">2019-10-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Notes/">Notes</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/07/homebrew/">homebrew</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><code>brew --help</code></p>
<p><code>brew help xxx</code></p>
<p>列出所有通过brew安装的软件<br><code>brew list</code></p>
<p>列出通过brew安装的软件的信息<br><code>brew list xxx</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fclehly.github.io/2019/10/07/homebrew/" data-id="ckogykb1n001bw50tg6zj68q3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mac/" rel="tag">mac</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Django" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/28/Django/" class="article-date">
  <time datetime="2019-09-28T12:21:45.000Z" itemprop="datePublished">2019-09-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/note/">note</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/09/28/Django/">Django</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="WSGI"><a href="#WSGI" class="headerlink" title="WSGI"></a>WSGI</h1><p>Web Server Gateway Interface。这是python中定义的一个网关协议，规定了app如何与webserver交互。WSGI是python中定义的一个网关协议规定web server如何跟web应用程序交互。 这个协议最主要的目的就是保证Python中所有web server程序或者gateway程序能够通过统一的协议跟web框架或者说web应用程序进行交互，这对于部署web程序来说很重要，你可以选择任何一个实现了WSGI协议的web server跑你的程序。</p>
<p>如果没有这个协议，那么每个程序每个web server可能都会实现各自的接口，最终的结果是一团乱。使用统一协议的另一个好处是web应用框架只需要实现wsgI就可以跟外部请求进行交互了，不用去针对某个web server来独立开发，交互逻辑开发者可以把精力放在框架本身。</p>
<p>wsgi分为两部分，其中一部分是web server或者gateway它监听某个端口上接受外部的请求，另一部分是web application，那不是我接受请求之后会通过wsgi协议规定的方式把数据传递给web application。Web application中处理完之后，设置对应的状态和header之后返回body部分，web server拿到返回数据之后，再进行HTTP协议的封装，最终返回完整的HTTP-Response数据。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fclehly.github.io/2019/09/28/Django/" data-id="ckogykb110005w50t8ptd9qrm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/django/" rel="tag">django</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-HDFS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/06/HDFS/" class="article-date">
  <time datetime="2019-08-06T14:18:47.000Z" itemprop="datePublished">2019-08-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/note/">note</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/06/HDFS/">HDFS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h1><h2 id="存储模型"><a href="#存储模型" class="headerlink" title="存储模型"></a>存储模型</h2><p>文件线性切割成块（block），每个block可以根据其字节内容在原文件中的偏移量offset确定，即第一个block的第一个字节的offset为0、第二个block的第一个字节的offset为block_size。block分散存储到集群节点当中，单一文件的block大小一致，不同文件之间的block大小可以不一样。block可以设置副本数，block的副本分散在不同节点中（即副本不会出现在同一节点中），这样可以很好地支持多个程序处理文件，但副本数不能超过节点数量。文件上传可以设置block的大小和副本数，且已上传的文件block副本数可以调整，但是大小不能改变。只支持一次写入多次读取，同一时刻只有一个写入者。可以append追加数据，但不可以修改block。</p>
<h2 id="架构模型"><a href="#架构模型" class="headerlink" title="架构模型"></a>架构模型</h2><p>文件组成分为：</p>
<ul>
<li>元数据metadata，</li>
<li>文件数据</li>
</ul>
<p>主从架构：</p>
<ul>
<li>NameNode节点保存文件元数据：单节点，维护一个虚拟目录树，映射到DataNode的文件系统的Block。</li>
<li>DataNode节点保存文件block数据：多节点；</li>
</ul>
<p><img src="http://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/images/hdfsarchitecture.png" alt="hdfs-architecture"></p>
<p>DataNode和NameNode保持心跳，提交block列表；</p>
<p>HdfsClient和NameNode交互元数据信息；</p>
<p>HdfsClient和DataNode交互文件Block信息。</p>
<p>HdfsClient与NameNode交互后，向DataNode交互，NameNode起到了一定的负载均衡作用。</p>
<h3 id="NameNode"><a href="#NameNode" class="headerlink" title="NameNode"></a>NameNode</h3><p>基于内存存储，不会和磁盘发生交换。数据只存在内存中，但会通过快照或增量日志做持久化策略。</p>
<p>主要功能：</p>
<ul>
<li>接受客户端的读写服务；</li>
<li>收集DataNode汇报的Block列表信息。</li>
</ul>
<p>其保存的metadata信息包括：</p>
<ul>
<li>文件ownership， permissions；</li>
<li>文件大小，时间</li>
<li>block列表，block偏移量，位置信息；</li>
<li>block每个副本的位置（由DataNode上报）</li>
</ul>
<h3 id="NameNode持久化"><a href="#NameNode持久化" class="headerlink" title="NameNode持久化"></a>NameNode持久化</h3><p>NameNode的metadata在启动后会加载到内存；</p>
<p>metadata存储到磁盘的文件名为fsimage；</p>
<p>block的位置信息不会保存到fsimage；</p>
<p>edits记录对metadata的操作记录；</p>
<h3 id="DataNode"><a href="#DataNode" class="headerlink" title="DataNode"></a>DataNode</h3><p>本地磁盘目录存储数据block，使文件形式，同时存储block的元数据信息文件幂md5；</p>
<p>启动datanode时会向namenode汇报block信息；</p>
<p>通过向nanenode发送心跳保持与其联系（3秒1次），如果namenode在10分钟内没有收到datanode的信息，则认为其已经lost，并copy其上的block（从其他节点的副本拷贝扩散，保证副本数一致）到其他datanode。</p>
<h3 id="HDFS优点"><a href="#HDFS优点" class="headerlink" title="HDFS优点"></a>HDFS优点</h3><ul>
<li>高容错性：<ul>
<li>数据自动保存多个副本；</li>
<li>副本数据丢失，则会自动回复；</li>
</ul>
</li>
<li>适合批处理<ul>
<li>移动计算程序而不是数据；</li>
<li>数据位置暴露给计算框架；</li>
</ul>
</li>
<li>适合大数据处理<ul>
<li>GB、TB、PB</li>
<li>百万规模以上的文件数量</li>
<li>10k+节点</li>
</ul>
</li>
<li>可构建在廉价机器上（可靠性越高的机器越贵）<ul>
<li>通过多副本提高可靠性；</li>
<li>提供了容错和恢复机制；</li>
</ul>
</li>
</ul>
<h3 id="HDFS缺点"><a href="#HDFS缺点" class="headerlink" title="HDFS缺点"></a>HDFS缺点</h3><ul>
<li>低延迟数据访问<ul>
<li>毫秒级随机访问</li>
<li>低延迟与高吞吐率</li>
</ul>
</li>
<li>小文件存取<ul>
<li>占用NameNode大量内存</li>
<li>寻道时间超过读取时间</li>
</ul>
</li>
<li>并发写入、文件随机修改<ul>
<li>一个文件只能有一个写者</li>
<li>仅支持append</li>
</ul>
</li>
</ul>
<h3 id="SecondaryNameNode"><a href="#SecondaryNameNode" class="headerlink" title="SecondaryNameNode"></a>SecondaryNameNode</h3><p>SNN不是NN的备份（但是可以做备份），其主要工作是帮助NN合并edits log，减少NN的启动时间。<br>SNN执行合并时间：</p>
<ul>
<li>根据配置文件设置的时间间隔<code>fs.checkpoint.period</code>，默认为3600s；</li>
<li>根据配置文件设置edits log大小<code>fs.checkpoint.size</code>规定edits log文件的最大值默认是64MB</li>
</ul>
<h3 id="安全模式"><a href="#安全模式" class="headerlink" title="安全模式"></a>安全模式</h3><ul>
<li>namenode启动时，首先将映像文件fsimage载入内存，并执行编辑日志（edits）中的各项操作。</li>
<li>一旦在内存中成功建立文件系统元数据的映射，则创建一个新的fsimage文件（这个操作不需要SecondaryNameNode）和一个空的编辑日志，这里也是namenode唯一一次创建fsimage。</li>
<li>此刻namenode运行在安全模式。即namenode的文件系统对于客户端来说只是只读的。（显示目录、文件内容等。写、删除、重命名等操作都会失败）</li>
<li>在此阶段Namenode收集各个datanode的报告，当书记块达到最小副本数以上时，会被认为是”安全”的，在一定比例（可设置）的数据块被确定为”安全”后，再过若干时间，安全模式结束。</li>
<li>当检测到副本数不足的数据块是，该快会被复制到达到最小副本数，系统中数据块大的位置并不是由namenode维护的，而是以块列表形式存储在datanode中。</li>
</ul>
<h3 id="Block的副本防置策略"><a href="#Block的副本防置策略" class="headerlink" title="Block的副本防置策略"></a>Block的副本防置策略</h3><ul>
<li>第一个副本：防置在上传的DN；如果是集群外提交，则随机挑选一台磁盘不是太满，CPU不太忙的节点；</li>
<li>第二个副本：防置在于第一个副本不同的机架（Rack）的节点上。</li>
<li>第三个副本：与第二个副本相同机架的节点。</li>
<li>更多副本：随机节点。</li>
</ul>
<h3 id="HDFS写流程"><a href="#HDFS写流程" class="headerlink" title="HDFS写流程"></a>HDFS写流程</h3><p>图</p>
<p>流水线</p>
<p>距离优先</p>
<h3 id="HDFS读流程"><a href="#HDFS读流程" class="headerlink" title="HDFS读流程"></a>HDFS读流程</h3><h3 id="HDFS文件权限-POSIX"><a href="#HDFS文件权限-POSIX" class="headerlink" title="HDFS文件权限 POSIX"></a>HDFS文件权限 POSIX</h3><ul>
<li><p>与Linux文件权限类似</p>
<ul>
<li>r:read; w:write; x:execute</li>
<li>权限x对于文件忽略，对于文件夹表示十分允许访问其内容</li>
</ul>
</li>
<li><p>如果Linux系统用户A使用hadoop命令创建一个文件，那么这个文件在HDFS中的owner就是A；</p>
</li>
<li><p>HDFS的权限目的：组织好人做错事，而不是阻止坏人做坏事。HDFS<br>相信，你告诉我你是谁，我就认为你是谁。</p>
</li>
</ul>
<h2 id="Hadoop2"><a href="#Hadoop2" class="headerlink" title="Hadoop2"></a>Hadoop2</h2><h3 id="Hadoop2产生背景"><a href="#Hadoop2产生背景" class="headerlink" title="Hadoop2产生背景"></a>Hadoop2产生背景</h3><p>Hadoop1中HDFS和MapReduce在高可用、扩展性等方面存在问题</p>
<ul>
<li>NameNode单点故障，难以应用于在线场景， HA</li>
<li>NameNode压力过大，且内存首先，影响扩展性， F<br>MapReduce存在的问题：</li>
<li>JobTracker访问压力大，影响系统扩展性</li>
<li>难以支持出MapReduce之外的计算框架，比如spark、Storm等</li>
</ul>
<p>Hadoop2.x由HDFS、MapReduce和YARN三个分支构成。</p>
<ul>
<li>HDFS： NN Federation（联邦）、HA；2.x只支持2个节点HA<br>，3.0实现一主多从；</li>
<li>MapReduce： 运行在YARN上的MR；离线计算，基于磁盘I/O计算</li>
<li>YARN：资源管理系统</li>
</ul>
<h3 id="HDFS2"><a href="#HDFS2" class="headerlink" title="HDFS2"></a>HDFS2</h3><p>解决HDFS1中单点故障和内存受限的问题</p>
<p>解决单点故障：</p>
<ul>
<li>HDFS HA ：通过贮备NameNode解决</li>
<li>如果中NameNode发生故障，则切换到备NameNode上；</li>
</ul>
<p>解决内存受限问题</p>
<ul>
<li>HDFS Federation 联邦</li>
<li>水平扩展，支持多个NameNode；<ul>
<li>每个NameNode分管一部分目录；</li>
<li>所有NameNode共享所有DataNode存储资源；<br>HDFS2仅是架构上发生了变化，使用方式不变，对HDFS使用者透明，HDFS1中的命令和API仍可以使用。</li>
</ul>
</li>
</ul>
<p>图</p>
<p>Linux NFS<br>JournalNodes<br>最终一致性</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fclehly.github.io/2019/08/06/HDFS/" data-id="ckogykb120007w50t2okzc723" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hadoop/" rel="tag">hadoop</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Redis-Notes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/04/Redis-Notes/" class="article-date">
  <time datetime="2019-08-04T12:39:15.000Z" itemprop="datePublished">2019-08-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/note/">note</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/04/Redis-Notes/">Redis Notes</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Redis-Notes"><a href="#Redis-Notes" class="headerlink" title="Redis Notes"></a>Redis Notes</h1><h3 id="commands"><a href="#commands" class="headerlink" title="commands"></a>commands</h3><h4 id="info"><a href="#info" class="headerlink" title="info"></a>info</h4><pre><code class="shell">&gt; info server
 Server
redis_version:5.0.3
redis_git_sha1:00000000
redis_git_dirty:0
redis_build_id:457be8ba4fa3e51f
redis_mode:standalone
os:Darwin 18.6.0 x86_64
arch_bits:64
multiplexing_api:kqueue
atomicvar_api:atomic-builtin
gcc_version:4.2.1
process_id:47187
run_id:f322e32c6eeac70063c80d37217a32f62da783ef
tcp_port:6379
uptime_in_seconds:400
uptime_in_days:0
hz:10
configured_hz:10
lru_clock:4641146
executable:/usr/local/opt/redis/bin/redis-server
config_file:/usr/local/etc/redis.conf
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fclehly.github.io/2019/08/04/Redis-Notes/" data-id="ckogykb1g000sw50tb6nh3lkj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/" rel="tag">redis</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Ubuntu-Notes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/02/Ubuntu-Notes/" class="article-date">
  <time datetime="2019-08-02T14:41:12.000Z" itemprop="datePublished">2019-08-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/os/">os</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/08/02/Ubuntu-Notes/">Ubuntu Notes</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Ubuntu-Notes"><a href="#Ubuntu-Notes" class="headerlink" title="Ubuntu Notes"></a>Ubuntu Notes</h1><p>[TOC]</p>
<hr>
<h3 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h3><h4 id="查看软链接实际指向的文件位置"><a href="#查看软链接实际指向的文件位置" class="headerlink" title="查看软链接实际指向的文件位置"></a>查看软链接实际指向的文件位置</h4><pre><code class="bash">$ ls -l &lt;filename&gt;
</code></pre>
<h4 id="ssh-keygen"><a href="#ssh-keygen" class="headerlink" title="ssh-keygen"></a>ssh-keygen</h4><ol>
<li>在master生成秘钥, <code>id_rsa, id_rsa.pub</code>或<code>id_dsa, id_dsa.pub</code>：<br>```bash<br>$ ssh-keygen -t [rsa|dsa]</li>
</ol>
<p>$ ls ~/.ssh<br>id_rsa  id_rsa.pub  known_hosts</p>
<p>$ cat id_rsa<br>—–BEGIN OPENSSH PRIVATE KEY—–<br>b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABFwAAAAdzc2gtcn<br>……<br>……<br>……<br>iXQVQHy5W5hX8kykh9PfVeh745kzWDQqcp9JOBlaWcRxY+g7A5xfYaEeTQqjd/ZX8692UP<br>I/EFmILN9N26WIE3AAAAD2Z3ekBmd3otbWJwLmxhbgECAw==<br>—–END OPENSSH PRIVATE KEY—–</p>
<p>$ cat id_rsa.pub<br>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCpQZCHx6E5sj3/AZec3nFBjnWi83g/9brGVuiAV8yv+q/PksiGmZ5XGoGStq6iG9DWVLJa1Tv26Kh8Evi9rvpSbGaPbPPA09Gzi+UNZMieydSeqpFIDanB0X9H8VfGEcOzIw21wOVtIYthu5cwyjdfO3zYAV/scJcQon4m/bttk3cAPmnaQXw2QVg/gFWVdSadgRC1MaQJcG5zJxEdVKSHYyk6gCVKZLYyc029iZndbNfqtKcsV+vkuSCwY/nD/5B+GqnXjPSgVL9I7QIC8Gf9k+C012hBF3Vir5p1edft2Fn+CN77WcOyj9ye/ZSLvNDgW5W/0Ab27klWe/pI1eBT <a href="mailto:&#x66;&#119;&#122;&#64;&#102;&#119;&#122;&#45;&#109;&#98;&#x70;&#46;&#108;&#97;&#110;">&#x66;&#119;&#122;&#64;&#102;&#119;&#122;&#45;&#109;&#98;&#x70;&#46;&#108;&#97;&#110;</a></p>
<pre><code>2. 把master生成的公钥发送到slave
</code></pre>
<p>$ ssh-copy-id -i ~/.ssh/id_rsa.pub username@ip_address</p>
<pre><code>此时，在slave上生成authorized_keys文件，内容为id_rsa.pub中的内容。

3. 从master通过ssh登录到slave，免密成功。
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fclehly.github.io/2019/08/02/Ubuntu-Notes/" data-id="ckogykb1j0011w50t1wtuhf4t" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/note/" rel="tag">note</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-LVS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/28/LVS/" class="article-date">
  <time datetime="2019-07-28T12:26:16.000Z" itemprop="datePublished">2019-07-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/server/">server</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/28/LVS/">LVS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="LVS"><a href="#LVS" class="headerlink" title="LVS"></a>LVS</h1><h2 id="基于LB的集群"><a href="#基于LB的集群" class="headerlink" title="基于LB的集群"></a>基于LB的集群</h2><h3 id="简单拓扑"><a href="#简单拓扑" class="headerlink" title="简单拓扑"></a>简单拓扑</h3><p><img src="ip-topo.001.png" alt="ip-topo.001.png"></p>
<ul>
<li>LB: 负载均衡器；IP；转发，不做三次握手；保证三次握手到四次分手不可分割；</li>
<li>CIP: Client IP;</li>
<li>VIP: Vitual IP;</li>
<li>DIP: Director’s IP;</li>
<li>RIP: Real IP;</li>
</ul>
<h4 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h4><h3 id="S-NAT"><a href="#S-NAT" class="headerlink" title="S_NAT"></a>S_NAT</h3><p>数据包过路由器时，修改源的IP地址。</p>
<h3 id="D-NAT"><a href="#D-NAT" class="headerlink" title="D_NAT"></a>D_NAT</h3><p>数据包过路由器时，修改目标的IP地址。</p>
<pre><code class="mermaid">sequenceDiagram

participant client
participant director
participant server

client -&gt;&gt; director: CIP-VIP
director -&gt;&gt; server: DIP-RIP
server --&gt;&gt; director: DIP-RIP
director --&gt;&gt; client: CIP-VIP
</code></pre>
<p>client 请求server的过程为DNAT，server回复client的过程为SNAT。</p>
<p>基于网络层</p>
<p>I/O 瓶颈：带宽是不对称的，下行的速度是大于上行的速度的。(请求往往比较小，通常可能只包含几十k的请求头，而返回通常数据量比较大，包含多媒体数据)。</p>
<h4 id="DR"><a href="#DR" class="headerlink" title="DR"></a>DR</h4><p>直接路由模型</p>
<p>LB只处理上行数据，分发给real-server，real-server处理完数据后直接返回给客户端，以解决LB上NAT的I/O瓶颈问题。</p>
<pre><code class="mermaid">sequenceDiagram

participant clients
participant director
participant servers

client -&gt;&gt; director: CIP-VIP
director -&gt;&gt; server: (RIP&#39;s MAC)CIP-VIP
server --&gt;&gt; client: CIP-VIP
</code></pre>
<p>改MAC地址的行为要求LB和real-server在同一网段下，否则如果超过一跳，则会导致修改的MAC地址被替换。这是基于MAC地址的欺骗。类似于网关的方式。</p>
<p>这里要求real-server默认网关指向运营商（ISP），且拥有公网IP地址PIP。</p>
<h3 id="TUN"><a href="#TUN" class="headerlink" title="TUN"></a>TUN</h3><p>tunnel，隧道；点对点的方式。类似于VPN。</p>
<pre><code class="mermaid">sequenceDiagram

participant client
participant director
participant server

client -&gt;&gt; director: CIP-VIP
director -&gt;&gt; server: (DIP-RIP(CIP-VIP))
server --&gt;&gt; director: (RIP-DIP(VIP-RIP))
director --&gt;&gt; client: VIP-CIP
</code></pre>
<h2 id="调度"><a href="#调度" class="headerlink" title="调度"></a>调度</h2><h3 id="静态调度："><a href="#静态调度：" class="headerlink" title="静态调度："></a>静态调度：</h3><ul>
<li>rr</li>
<li>wrr</li>
<li>sh</li>
<li>dh</li>
</ul>
<h3 id="动态调度"><a href="#动态调度" class="headerlink" title="动态调度"></a>动态调度</h3><ul>
<li>lc： 最少连接</li>
<li>wlc： 加权最少连接；</li>
<li>sed： 最短期望延迟；</li>
<li>nq： never queue；</li>
<li>LBLC：基于本地的最少连接</li>
<li>DH：</li>
<li>LBLCR：</li>
</ul>
<h2 id="ipvsadm"><a href="#ipvsadm" class="headerlink" title="ipvsadm"></a>ipvsadm</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://fclehly.github.io/2019/07/28/LVS/" data-id="ckogykb16000bw50t63dl11uv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/loadbalance/" rel="tag">loadbalance</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/lvs/" rel="tag">lvs</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring-Cloud" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/27/Spring-Cloud/" class="article-date">
  <time datetime="2019-07-27T14:29:23.000Z" itemprop="datePublished">2019-07-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/27/Spring-Cloud/">Spring Cloud</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="#%E5%9D%91">坑</a>   </p>
<ul>
<li><a href="#jaxb-%E5%BC%82%E5%B8%B8">JAXB 异常</a></li>
</ul>
<h2 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h2><h3 id="JAXB-异常"><a href="#JAXB-异常" class="headerlink" title="JAXB 异常"></a>JAXB 异常</h3><p>在运行spring-cloud-eureka-server时，会报错，日志打印错误栈如下：</p>
<pre><code>java.lang.TypeNotPresentException: Type javax.xml.bind.JAXBContext not present
    at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117) ~[na:na]
    at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125) ~[na:na]
    at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]
    at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68) ~[na:na]
    at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138) ~[na:na]
    at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]
    at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117) ~[na:na]
    at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95) ~[na:na]
    at java.base/java.lang.Class.getGenericInterfaces(Class.java:1138) ~[na:na]
    at com.sun.jersey.core.reflection.ReflectionHelper.getClass(ReflectionHelper.java:629) ~[jersey-core-1.19.1.jar:1.19.1]
    at com.sun.jersey.core.reflection.ReflectionHelper.getClass(ReflectionHelper.java:625) ~[jersey-core-1.19.1.jar:1.19.1]
    at com.sun.jersey.core.spi.factory.ContextResolverFactory.getParameterizedType(ContextResolverFactory.java:202) ~[jersey-core-1.19.1.jar:1.19.1]
    at com.sun.jersey.core.spi.factory.ContextResolverFactory.init(ContextResolverFactory.java:89) ~[jersey-core-1.19.1.jar:1.19.1]
    at com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1332) ~[jersey-server-1.19.1.jar:1.19.1]
    at com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:180) ~[jersey-server-1.19.1.jar:1.19.1]
    at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:799) ~[jersey-server-1.19.1.jar:1.19.1]
    at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:795) ~[jersey-server-1.19.1.jar:1.19.1]
    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193) ~[jersey-core-1.19.1.jar:1.19.1]
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:795) ~[jersey-server-1.19.1.jar:1.19.1]
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:790) ~[jersey-server-1.19.1.jar:1.19.1]
    at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:509) ~[jersey-servlet-1.19.1.jar:1.19.1]
    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:339) ~[jersey-servlet-1.19.1.jar:1.19.1]
    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:605) ~[jersey-servlet-1.19.1.jar:1.19.1]
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:207) ~[jersey-servlet-1.19.1.jar:1.19.1]
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:394) ~[jersey-servlet-1.19.1.jar:1.19.1]
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:744) ~[jersey-servlet-1.19.1.jar:1.19.1]
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:270) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:106) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4530) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5169) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140) ~[na:na]
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:841) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140) ~[na:na]
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:421) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:932) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:456) ~[tomcat-embed-core-9.0.21.jar:9.0.21]
    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:105) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:86) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:414) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:178) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:179) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:152) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:742) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:389) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:311) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1213) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1202) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at com.example.eurekaserver.EurekaServerApplication.main(EurekaServerApplication.java:12) ~[classes/:na]
Caused by: java.lang.ClassNotFoundException: javax.xml.bind.JAXBContext
    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:583) ~[na:na]
    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]
    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]
    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]
    at java.base/java.lang.Class.forName(Class.java:398) ~[na:na]
    at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114) ~[na:na]
    ... 65 common frames omitted

2019-07-27 22:34:12.507 ERROR 19315 --- [           main] o.apache.catalina.core.StandardContext   : One or more Filters failed to start. Full details will be found in the appropriate container log file
2019-07-27 22:34:12.508 ERROR 19315 --- [           main] o.apache.catalina.core.StandardContext   : Context [] startup failed due to previous errors
2019-07-27 22:34:12.511  WARN 19315 --- [           main] o.a.c.loader.WebappClassLoaderBase       : The web application [ROOT] appears to have started a thread named [spring.cloud.inetutils] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@11.0.2/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@11.0.2/java.util.concurrent.locks.LockSupport.park(LockSupport.java:194)
 java.base@11.0.2/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2081)
 java.base@11.0.2/java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:433)
 java.base@11.0.2/java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1054)
 java.base@11.0.2/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1114)
 java.base@11.0.2/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
 java.base@11.0.2/java.lang.Thread.run(Thread.java:834)
2019-07-27 22:34:12.540  INFO 19315 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2019-07-27 22:34:12.546  WARN 19315 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
2019-07-27 22:34:12.557  INFO 19315 --- [           main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.
2019-07-27 22:34:12.564 ERROR 19315 --- [           main] o.s.boot.SpringApplication               : Application run failed

org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:155) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:742) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:389) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:311) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1213) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1202) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at com.example.eurekaserver.EurekaServerApplication.main(EurekaServerApplication.java:12) ~[classes/:na]
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:124) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:86) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:414) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:178) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:179) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:152) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    ... 8 common frames omitted
Caused by: java.lang.IllegalStateException: StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[] failed to start
    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.rethrowDeferredStartupExceptions(TomcatWebServer.java:169) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:108) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]
    ... 13 common frames omitted
</code></pre>
<p>可以看到主要的错误信息是：<code>java.lang.TypeNotPresentException: Type javax.xml.bind.JAXBContext not present</code>。</p>
<p>这是因为java11把<code>java.xml.bind</code>从classpath中移除了：</p>
<ul>
<li>java7: include</li>
<li>java8: include</li>
<li>java9: deprecated</li>
<li>java10: deprecated</li>
<li>java11: removed<br>因此需要在依赖中手动引入<code>JAXB</code>依赖，maven的<code>pom.xml</code>添加的依赖如下：<pre><code class="xml">&lt;dependency&gt;
  &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;
  &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;
  &lt;version&gt;2.3.0.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;
  &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;
  &lt;version&gt;2.3.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;
  &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;
  &lt;version&gt;2.3.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://fclehly.github.io/2019/07/27/Spring-Cloud/" data-id="ckogykb1h000ww50t2jpz9xe2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/">Blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Note/">Note</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Notes/">Notes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Paper/">Paper</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Turtorial/">Turtorial</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/media/">media</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/note/">note</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/os/">os</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/server/">server</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Deep-Learning/" rel="tag">Deep Learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLM/" rel="tag">NLM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLP/" rel="tag">NLP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Paper/" rel="tag">Paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/audio/" rel="tag">audio</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/" rel="tag">c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devops/" rel="tag">devops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/django/" rel="tag">django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/function/" rel="tag">function</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/" rel="tag">hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/loadbalance/" rel="tag">loadbalance</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lvs/" rel="tag">lvs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/" rel="tag">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/media/" rel="tag">media</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/note/" rel="tag">note</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reading/" rel="tag">reading</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/serverless/" rel="tag">serverless</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/video/" rel="tag">video</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/" rel="tag">vim</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Deep-Learning/" style="font-size: 20px;">Deep Learning</a> <a href="/tags/NLM/" style="font-size: 10px;">NLM</a> <a href="/tags/NLP/" style="font-size: 10px;">NLP</a> <a href="/tags/Paper/" style="font-size: 10px;">Paper</a> <a href="/tags/audio/" style="font-size: 10px;">audio</a> <a href="/tags/c/" style="font-size: 10px;">c++</a> <a href="/tags/devops/" style="font-size: 10px;">devops</a> <a href="/tags/django/" style="font-size: 10px;">django</a> <a href="/tags/function/" style="font-size: 10px;">function</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/loadbalance/" style="font-size: 10px;">loadbalance</a> <a href="/tags/lvs/" style="font-size: 10px;">lvs</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/media/" style="font-size: 10px;">media</a> <a href="/tags/note/" style="font-size: 10px;">note</a> <a href="/tags/reading/" style="font-size: 10px;">reading</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/serverless/" style="font-size: 10px;">serverless</a> <a href="/tags/video/" style="font-size: 10px;">video</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/27/Unittest/">Unittest</a>
          </li>
        
          <li>
            <a href="/2021/05/05/Media-Basic/">Media-Basic</a>
          </li>
        
          <li>
            <a href="/2020/06/28/go-slice/">go slice</a>
          </li>
        
          <li>
            <a href="/2019/10/07/homebrew/">homebrew</a>
          </li>
        
          <li>
            <a href="/2019/09/28/Django/">Django</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 FWZ<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>